#!/usr/bin/env bash
#
# Copyright 2018, Joe Block <jpb@unixorn.net>
# License: Apache 2.0
#
# Mojave has a pain in the ass warning about not enough disk being free, and
# on my MBA, it pops up every few minutes. Fuck that noise.
#
# This script allows you to set the warning threshold to a different number
# of gigabytes of free space before Mojave whines at you.

if [[ $# -ne 1 ]]; then
  echo "$(basename $0) takes a single argument, the minimum number of gigabytes of free space before complaining"
  exit 1
fi

if ! [[ "$1" =~ ^[0-9]+$ ]]; then
  echo "You must specify an integer number of gigabytes free on disk to trigger the Mojave disk warning"
  exit 1
fi

defaults write com.apple.diskspaced minFreeSpace "${1}"
